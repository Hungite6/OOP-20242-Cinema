<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Chatbox Hỗ Trợ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f0f2f5;
    }

    #chat-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #0084ff;
      color: white;
      padding: 10px 15px;
      border-radius: 30px;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
      font-size: 14px;
      z-index: 999;
    }

    #chatbox-container {
      position: fixed;
      bottom: 70px;
      right: 20px;
      width: 350px;
      height: 500px;
      z-index: 1000;
      display: none;
    }

    .chat-container {
      width: 100%;
      height: 100%;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .chat-messages {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      background: #e5ddd5;
    }

    .chat-input {
      display: flex;
      border-top: 1px solid #ccc;
      background: white;
    }

    .chat-input input {
      flex: 1;
      padding: 10px;
      border: none;
      outline: none;
    }

    .chat-input button {
      padding: 10px 20px;
      border: none;
      background: #0084ff;
      color: white;
      cursor: pointer;
    }

    .message {
      margin: 8px 0;
      max-width: 70%;
      padding: 10px;
      border-radius: 10px;
      clear: both;
      position: relative;
      font-size: 14px;
    }

    .user-message {
      background: #0084ff;
      color: white;
      float: right;
      text-align: right;
      border-bottom-right-radius: 0;
    }

    .bot-message {
      background: #f1f0f0;
      color: black;
      float: left;
      text-align: left;
      border-bottom-left-radius: 0;
    }

    .time {
      display: block;
      font-size: 10px;
      color: #666;
      margin-top: 5px;
    }
  </style>
</head>
<body>

<div id="chat-toggle" onclick="toggleChat()">Chat hỗ trợ</div>

<div id="chatbox-container">
  <div class="chat-container">
    <div id="chatbox" class="chat-messages"></div>
    <div class="chat-input">
      <input type="text" id="input" placeholder="Nhập tin nhắn..." onkeypress="if(event.key === 'Enter') sendMessage()">
      <button onclick="sendMessage()">Gửi</button>
    </div>
  </div>
</div>

<script>
  const botReplies = [
    "Xin chào bạn!",
    "Cảm ơn bạn đã liên hệ.",
    "Chúng tôi sẽ phản hồi sớm.",
    "Bạn cần hỗ trợ gì thêm không?",
    "Hiện tại chúng tôi đang kiểm tra.",
    "Vui lòng chờ trong giây lát.",
    "Chúng tôi đã nhận được yêu cầu của bạn.",
    "Vé của bạn đang được xử lý.",
    "Bạn muốn xem phim nào ạ?",
    "Bạn có thể chọn suất chiếu ở mục 'Lịch chiếu'."
  ];

  function currentTime() {
    const now = new Date();
    let h = now.getHours();
    let m = now.getMinutes();
    if (m < 10) m = '0' + m;
    return `${h}:${m}`;
  }

  function toggleChat() {
    const container = document.getElementById('chatbox-container');
    container.style.display = (container.style.display === 'none' || container.style.display === '') ? 'block' : 'none';
  }

  function sendMessage() {
    const input = document.getElementById('input');
    const chatbox = document.getElementById('chatbox');
    const message = input.value.trim();
    if (message) {
      const userDiv = document.createElement('div');
      userDiv.className = 'message user-message';
      userDiv.innerHTML = `${message}<span class="time">${currentTime()}</span>`;
      chatbox.appendChild(userDiv);
      input.value = "";
      chatbox.scrollTop = chatbox.scrollHeight;

      setTimeout(() => {
        const botDiv = document.createElement('div');
        botDiv.className = 'message bot-message';
        const reply = botReplies[Math.floor(Math.random() * botReplies.length)];
        botDiv.innerHTML = `${reply}<span class="time">${currentTime()}</span>`;
        chatbox.appendChild(botDiv);
        chatbox.scrollTop = chatbox.scrollHeight;
      }, 600);
    }
  }
</script>

</body>
</html>
